<h1>
  <%= @article.title %>
</h1>

<div class="author">
  作者：<%= @article.author.nickname %>
</div>
<div class="clearfix">
  <% unless @article.source.blank? %>
    <div class="pull-right">
      <%= link_to @article.source, @article.source, target: '_blank', class: 'link' %>
    </div>
  <% end -%>  
  <div class="time">
    <%= short_time @article.created_at %>
  </div>
</div>
<div class="content" style="margin-top: 20px;">
  <%= raw @article.content %>
</div>
<hr>
<h2><%= @article.comments.count %> Comments:</h2>
<%= form_for [@article, @comment] do |f| %>
  <%= f.text_field :content %>
  <%= f.submit %>
<% end -%>
<% @article.comments.each do |comment| %>
<div class="well">
  <b>
    <%= comment.commenter.nickname %>
    says: 
  </b>
  <%= comment.content %>
  <% comment.subcomments.each do |subcomment| %>
  <div class="well">
    <b>
      <%= subcomment.commenter.nickname %> says: 
    </b>
    <%= subcomment.content %>
  </div>
  <% end -%>
  <%= form_for @subcomment, url: article_subcomments_path(@article, comment) do |f| %>
    <%= f.text_field :content %>
    <%= f.submit %>
  <% end -%>
</div>
<% end -%>
<br>
<br>
<br>
<br>
<%= link_to 'Edit', edit_article_path(@article) %> |
<%= link_to 'Back', articles_path %>
